services:
    OHMedia\FileBundle\Service\FileManager:
        arguments:
            - "@oh_media_file.file_repository"
            - "@oh_media_file.image_repository"
            - "@oh_media_file.image_resize_repository"
            - "@router.default"
            - "%kernel.project_dir%"

    oh_media_file.file_manager:
        alias: OHMedia\FileBundle\Service\FileManager

    OHMedia\FileBundle\Service\FileListing:
        autowire: true

    OHMedia\FileBundle\Service\FileResponse:
        autowire: true

    OHMedia\FileBundle\Twig\FileExtension:
        arguments: ["@oh_media_file.file_manager"]
        tags: ["twig.extension"]

    oh_media_file.file_extension:
        alias: OHMedia\FileBundle\Twig\FileExtension

    OHMedia\FileBundle\EventListener\FileSubscriber:
        autowire: true
        tags: ["doctrine.event_subscriber"]

    OHMedia\FileBundle\Form\Type\FileEntityType:
        arguments: ["@oh_media_file.file_manager"]
        tags: ["form.type"]

    OHMedia\FileBundle\Repository\FileRepository:
        autowire: true
        tags: ["doctrine.repository_service"]

    oh_media_file.file_repository:
        alias: OHMedia\FileBundle\Repository\FileRepository

    OHMedia\FileBundle\Repository\FileFolderRepository:
        autowire: true
        tags: ["doctrine.repository_service"]

    oh_media_file.file_folder_repository:
        alias: OHMedia\FileBundle\Repository\FileFolderRepository

    OHMedia\FileBundle\Repository\ImageRepository:
        autowire: true
        tags: ["doctrine.repository_service"]

    oh_media_file.image_repository:
        alias: OHMedia\FileBundle\Repository\ImageRepository

    OHMedia\FileBundle\Repository\ImageResizeRepository:
        autowire: true
        tags: ["doctrine.repository_service"]

    oh_media_file.image_resize_repository:
        alias: OHMedia\FileBundle\Repository\ImageResizeRepository

    OHMedia\FileBundle\Controller\FileController:
        tags: ["controller.service_arguments"]
        calls:
            - method: setContainer
              arguments: ["@service_container"]

    OHMedia\FileBundle\Security\Voter\FileVoter:
        tags: ["security.voter"]

    OHMedia\FileBundle\Security\Voter\FileFolderVoter:
        tags: ["security.voter"]

    OHMedia\FileBundle\Security\Voter\ImageVoter:
        tags: ["security.voter"]
